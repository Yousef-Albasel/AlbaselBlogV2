<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Tutorial for Java Multithreading">
<title>Java Multithreading</title>

<link rel='canonical' href='http://localhost:1313/post/java-multithreading/'>

<link rel="stylesheet" href="/scss/style.min.b9c8156d464c343bdacaf14a871581fb94cbbdb9dd5cbce4ba017361187cc930.css"><meta property='og:title' content="Java Multithreading">
<meta property='og:description' content="Tutorial for Java Multithreading">
<meta property='og:url' content='http://localhost:1313/post/java-multithreading/'>
<meta property='og:site_name' content='Yousef Albael'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Notes' /><meta property='og:image' content='http://localhost:1313/post/java-multithreading/java.png' />
<meta name="twitter:title" content="Java Multithreading">
<meta name="twitter:description" content="Tutorial for Java Multithreading"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://localhost:1313/post/java-multithreading/java.png' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu277825007059913073.png" width="300"
                            height="326" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üßú‚Äç‚ôÇÔ∏è</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Yousef Albael</a></h1>
            <h2 class="site-description">I do computer graphics, AI and random programming stuff.</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    

            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/java-multithreading/">
                <img src="/post/java-multithreading/java_hu14150816243313541847.png"
                        srcset="/post/java-multithreading/java_hu14150816243313541847.png 800w, /post/java-multithreading/java_hu2941758816311611197.png 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post Java Multithreading" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/software-engineering/" style="background-color: #2a9d8f; color: #fff;">
                Software Engineering
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/java-multithreading/">Java Multithreading</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Tutorial for Java Multithreading
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    15 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="java-multithreading-notes">Java Multithreading Notes
</h1><p>These are course notes taken from <strong><a class="link" href="https://www.youtube.com/@RayanSlim087"  target="_blank" rel="noopener"
    >Rayan Slim</a></strong> Multithreading playlist, which is really good and worth the watch.</p>
<p><strong>Multithreading</strong> in Java is a process of executing multiple threads simultaneously.</p>
<p>A thread is a lightweight sub-process, the smallest unit of processing. Multiprocessing and multithreading, both are used to achieve multitasking.</p>
<p>In Java, a thread always exists in any one of the following states. These states are:</p>
<ol>
<li>New</li>
<li>Active</li>
<li>Blocked / Waiting</li>
<li>Timed Waiting</li>
<li>Terminated</li>
</ol>
<h2 id="explanation-of-different-thread-states">Explanation of Different Thread States
</h2><p><strong>New:</strong>  Whenever a new thread is created, it is always in the new state. For a thread in the new state, the code has not been run yet and thus has not begun its execution.</p>
<p><strong>Active:</strong>  When a thread invokes the start() method, it moves from the new state to the active state. The active state contains two states within it: one is  <strong>runnable</strong>, and the other is  <strong>running</strong>.</p>
<p><strong>Blocked or Waiting:</strong>  Whenever a thread is inactive for a span of time (not permanently) then, either the thread is in the blocked state or is in the waiting state.</p>
<p><strong>Terminated:</strong>  A thread reaches the termination state because of the following reasons:</p>
<ul>
<li>When a thread has finished its job, then it exists or terminates normally.</li>
<li><strong>Abnormal termination:</strong>  It occurs when some unusual events such as an unhandled exception or segmentation fault.
<img src="https://images.javatpoint.com/core/images/life-cycle-of-a-thread.png"
	
	
	
	loading="lazy"
	
		alt="Java thread life cycle"
	
	
></li>
</ul>
<h3 id="creating-a-thread">Creating a Thread
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChildThreadTask</span> <span style="color:#66d9ef">implements</span> Runnable{  
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">@Override</span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>(){ count(); }}
</span></span></code></pre></div><p>This class is used to create a thread that executes the <code>count()</code> method when started.</p>
<p>Or we can use lambda expression</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread T1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread( () <span style="color:#f92672">-&gt;</span> {count();});
</span></span></code></pre></div><h3 id="setting-priority">Setting Priority
</h3><p>When giving max priority, it doesn&rsquo;t mean it will be the first to run, but we can gurantee it finishes first</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>T2.<span style="color:#a6e22e">setPriority</span>(Thread.<span style="color:#a6e22e">MAX_PRIORITY</span>);
</span></span></code></pre></div><p>To make other threads surrender or give away thier turn in running we can use Yeild()</p>
<p><code>Thread.yield()</code> in Java is a static method that signals to the thread scheduler that the current thread is willing to pause its execution and allow other threads of the same or higher priority to run. However, there are important details to understand about what <code>yield()</code> does and doesn&rsquo;t do:</p>
<h2 id="example">Example
</h2><p>Now having these three threads: Thread - 0, Thread - 1 and Thread - 2
First two are of the same priority</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread T1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread( () <span style="color:#f92672">-&gt;</span> {count();});  
</span></span><span style="display:flex;"><span>Thread T2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread( () <span style="color:#f92672">-&gt;</span> {count();});  
</span></span><span style="display:flex;"><span>Thread T3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread( () <span style="color:#f92672">-&gt;</span> {count();});  
</span></span><span style="display:flex;"><span>T1.<span style="color:#a6e22e">setPriority</span>(Thread.<span style="color:#a6e22e">MAX_PRIORITY</span>);  
</span></span><span style="display:flex;"><span>T1.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>T2.<span style="color:#a6e22e">setPriority</span>(Thread.<span style="color:#a6e22e">MAX_PRIORITY</span>);  
</span></span><span style="display:flex;"><span>T2.<span style="color:#a6e22e">start</span>();
</span></span></code></pre></div><p>We also have a count method that will run when a thread starts, printing some information, and a yield method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">count</span>(){  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {  
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Current Thread: &#34;</span> <span style="color:#f92672">+</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; It&#39;s state is &#34;</span> <span style="color:#f92672">+</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getState</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; With Prioirty &#34;</span> <span style="color:#f92672">+</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getPriority</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; Counting - &#34;</span> <span style="color:#f92672">+</span> i);  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>().<span style="color:#a6e22e">equals</span>(<span style="color:#e6db74">&#34;Thread-2&#34;</span>)) {  
</span></span><span style="display:flex;"><span>            Thread.<span style="color:#a6e22e">yield</span>();  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>       }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The expected output for this code, Both threads with the highest priority will be executed at some turn, then they will alternate execution due to yield, and continue running until they finish, Thread-2 will not get affected by Yeild since it&rsquo;s out the condition.</p>
<pre tabindex="0"><code>Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 81
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 80
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 82
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 81
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 83
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 82
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 84
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 83

Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 81
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 80
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 82
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 81
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 83
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 82
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 84
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 83
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 85
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 84
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 86
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 85
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 87
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 86
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 88
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 87
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 89
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 88
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 90
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 91
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 89
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 92
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 90
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 3
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 93
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 91
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 4
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 94
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 92
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 95
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 5
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 93
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 96
Current Thread: main It&#39;s state is RUNNABLE With Prioirty 5 Counting - 4
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 6
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 94
Current Thread: main It&#39;s state is RUNNABLE With Prioirty 5 Counting - 5
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 95
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 97
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 7
Current Thread: main It&#39;s state is RUNNABLE With Prioirty 5 Counting - 6
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 96
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 98
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 97
Current Thread: Thread-0 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 99
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 98
Current Thread: Thread-1 It&#39;s state is RUNNABLE With Prioirty 10 Counting - 99
</code></pre><p>Now that Thread -1 finished, Another Thread starts, doesn&rsquo;t yield though.</p>
<pre tabindex="0"><code>Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 8
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 9
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 10
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 11
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 12
Current Thread: main It&#39;s state is RUNNABLE With Prioirty 5 Counting - 7
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 13
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 14
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 15
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 16
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 17
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 18
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 19
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 20
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 21
Current Thread: Thread-2 It&#39;s state is RUNNABLE With Prioirty 5 Counting - 22
</code></pre><h1 id="thread-inheritance">Thread Inheritance
</h1><p>In this section we are trying to be a little more organized and leverage the use of Object Oriented Architecture for managing and creating threads.</p>
<p>All we have to do is create a class that extends Thread class, override it&rsquo;s run method and add your own logic</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AtheleteThread</span> <span style="color:#66d9ef">extends</span> Thread{  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> bibNumber;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">AtheleteThread</span>(<span style="color:#66d9ef">int</span> bibNumber) {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">bibNumber</span> <span style="color:#f92672">=</span> bibNumber;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getBibNumber</span>() {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> bibNumber;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setBibNumber</span>(<span style="color:#66d9ef">int</span> bibNumber) {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">bibNumber</span> <span style="color:#f92672">=</span> bibNumber;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">double</span> distanceKM <span style="color:#f92672">=</span> 10;  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">double</span> steps <span style="color:#f92672">=</span> 0.<span style="color:#a6e22e">00000001</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">double</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;=</span> distanceKM; i <span style="color:#f92672">+=</span> steps) {  
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (Math.<span style="color:#a6e22e">abs</span>(i <span style="color:#f92672">-</span> distanceKM) <span style="color:#f92672">&lt;</span> steps) {  
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;\nAthlete number &#34;</span> <span style="color:#f92672">+</span> bibNumber <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; has finished the race.\n&#34;</span>);  
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then all you have to do is</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>AtheleteThread firstAthelete  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtheleteThread(123123);  
</span></span><span style="display:flex;"><span>AtheleteThread secondAthelete  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtheleteThread(999999);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>firstAthelete.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>secondAthelete.<span style="color:#a6e22e">start</span>();
</span></span></code></pre></div><p>And that&rsquo;s much cleaner than having to do this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Creating the first athlete thread  </span>
</span></span><span style="display:flex;"><span>  Thread firstAthlete <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> bibNumber <span style="color:#f92672">=</span> 84921;  
</span></span><span style="display:flex;"><span>        runRace(bibNumber);  
</span></span><span style="display:flex;"><span>    });  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Creating the second athlete thread  </span>
</span></span><span style="display:flex;"><span>  Thread secondAthlete <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> bibNumber <span style="color:#f92672">=</span> 43114;  
</span></span><span style="display:flex;"><span>        runRace(bibNumber);  
</span></span><span style="display:flex;"><span>    });  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Starting the threads  </span>
</span></span><span style="display:flex;"><span>  firstAthlete.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>    secondAthlete.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">runRace</span>(<span style="color:#66d9ef">int</span> bibNumber) {  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> distanceKM <span style="color:#f92672">=</span> 10;  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> steps <span style="color:#f92672">=</span> 0.<span style="color:#a6e22e">00000001</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">double</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;=</span> distanceKM; i <span style="color:#f92672">+=</span> steps) {  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (Math.<span style="color:#a6e22e">abs</span>(i <span style="color:#f92672">-</span> distanceKM) <span style="color:#f92672">&lt;</span> steps) {  
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;\nAthlete number &#34;</span> <span style="color:#f92672">+</span> bibNumber <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; has finished the race.\n&#34;</span>);  
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;   
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="thread-joinning">Thread Joinning
</h1><p><strong>Thread joining</strong> is a mechanism in Java (and many other programming languages) that allows one thread to wait for the completion of another. It is achieved using the <code>join()</code> method provided by the <code>Thread</code> class.</p>
<h3 id="how-join-works">How <code>join()</code> Works:
</h3><ul>
<li>When <code>threadA.join()</code> is called in the context of another thread (e.g., <code>threadB</code>), <code>threadB</code> will pause its execution and wait until <code>threadA</code> has completed its execution.</li>
<li>Once <code>threadA</code> finishes, <code>threadB</code> resumes execution from the point where it called <code>join()</code>.</li>
</ul>
<p>In this example we have 4 Threads, each representing a player doing progress on some game, calculating score, when finished the main threads displays the player with most score.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PlayerThread<span style="color:#f92672">[]</span> threads <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PlayerThread<span style="color:#f92672">[</span>4<span style="color:#f92672">]</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> threads.<span style="color:#a6e22e">length</span>; i<span style="color:#f92672">++</span>) {  
</span></span><span style="display:flex;"><span>    threads<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PlayerThread(i<span style="color:#f92672">+</span>1);  
</span></span><span style="display:flex;"><span>    threads<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TODO: Task One - Wait for all player threads to finish  </span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Determine the player with the highest score  </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> winningScore <span style="color:#f92672">=</span> 0;  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> winner <span style="color:#f92672">=</span> 0;  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> threads.<span style="color:#a6e22e">length</span>; i<span style="color:#f92672">++</span>) {  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (threads<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>.<span style="color:#a6e22e">getScore</span>() <span style="color:#f92672">&gt;</span> winningScore) {  
</span></span><span style="display:flex;"><span>        winningScore <span style="color:#f92672">=</span> threads<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>.<span style="color:#a6e22e">getScore</span>();  
</span></span><span style="display:flex;"><span>        winner <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> 1;  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Player &#34;</span> <span style="color:#f92672">+</span> winner <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; wins with a score of &#34;</span> <span style="color:#f92672">+</span> winningScore);
</span></span></code></pre></div><p>But you can notice that, the main thread finished faster that all 4 threads
and this is an issue</p>
<pre tabindex="0"><code>Player 1 wins with a score of 504
Player 1 final score: 1349982150
Player 4 final score: 1350016018
Player 3 final score: 1350107767
Player 2 final score: 1350004850
</code></pre><p>A simple solution is using <code>Join()</code>, by calling it for each player thread, while on the main thread. It will cause the main thread to pause until all player threads finished</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (PlayerThread player : threads){  
</span></span><span style="display:flex;"><span>    player.<span style="color:#a6e22e">join</span>();  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code class="language-Player" data-lang="Player">Player 4 final score: 1350028067
Player 2 final score: 1349911192
Player 3 final score: 1349980041
Player 1 wins with a score of 1350029760
</code></pre><h1 id="daemon-threads">Daemon Threads
</h1><p>Daemon threads are special types of threads in Java that run in the background and do not prevent the program from exiting. The key characteristic of daemon threads is that they <strong>do not block the JVM from shutting down</strong> when all non-daemon (user) threads have completed. They are designed to perform background tasks, such as monitoring or housekeeping operations.</p>
<ul>
<li>
<p><strong>Background Operation</strong>: Daemon threads are typically used for tasks that are not crucial to the main execution of the program, like garbage collection, logging, or periodic checks. They work in the background while the main (user) threads are executing.</p>
</li>
<li>
<p><strong>JVM Shutdown</strong>: The JVM can terminate as soon as all <strong>non-daemon</strong> threads (user threads) have finished. When there are only daemon threads left, the JVM will exit, even if the daemon threads are still running. This means daemon threads don&rsquo;t prevent the program from exiting, which is different from regular user threads that will cause the program to wait until they finish.</p>
</li>
<li>
<p><strong>Setting a Thread as Daemon</strong>: You can make a thread a daemon thread by calling the <code>setDaemon(true)</code> method before starting it. This must be done before the thread is started; otherwise, an <code>IllegalThreadStateException</code> will be thrown
.</p>
</li>
</ul>
<p>In this example we are creating two threads, one which performs a very intensive task, then finishes. other is used for logging</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Thread memoryMonitorThread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> MemoryMonitorDaemon());  
</span></span><span style="display:flex;"><span>memoryMonitorThread.<span style="color:#a6e22e">start</span>();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Thread memoryIntensiveTaskThread <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> MemoryIntensiveTask());  
</span></span><span style="display:flex;"><span>memoryIntensiveTaskThread.<span style="color:#a6e22e">start</span>();
</span></span></code></pre></div><p>having the code like this, the logging thread will keep executing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MemoryMonitorDaemon</span> <span style="color:#66d9ef">implements</span> Runnable {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {  
</span></span><span style="display:flex;"><span>        Runtime runtime <span style="color:#f92672">=</span> Runtime.<span style="color:#a6e22e">getRuntime</span>();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {  
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {  
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">long</span> usedMemory <span style="color:#f92672">=</span> runtime.<span style="color:#a6e22e">totalMemory</span>() <span style="color:#f92672">-</span> runtime.<span style="color:#a6e22e">freeMemory</span>();  
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Memory Usage: &#34;</span> <span style="color:#f92672">+</span> usedMemory <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; bytes&#34;</span>);  
</span></span><span style="display:flex;"><span>                Thread.<span style="color:#a6e22e">sleep</span>(5000); <span style="color:#75715e">// Check memory usage every 5 seconds  </span>
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">catch</span> (InterruptedException e) {  
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Memory monitor interrupted&#34;</span>);  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;  
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Random;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MemoryIntensiveTask</span> <span style="color:#66d9ef">implements</span> Runnable {  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {  
</span></span><span style="display:flex;"><span>        ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> numbers <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();  
</span></span><span style="display:flex;"><span>        Random random <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {  
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100000; i<span style="color:#f92672">++</span>) { <span style="color:#75715e">// Reduced number of iterations  </span>
</span></span><span style="display:flex;"><span>  numbers.<span style="color:#a6e22e">add</span>(random.<span style="color:#a6e22e">nextInt</span>());  
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">%</span> 1000 <span style="color:#f92672">==</span> 0) {  
</span></span><span style="display:flex;"><span>                    Thread.<span style="color:#a6e22e">sleep</span>(150); <span style="color:#75715e">// Adds a slight delay every 1000 iterations  </span>
</span></span><span style="display:flex;"><span>  }  
</span></span><span style="display:flex;"><span>            }  
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (InterruptedException e) {  
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Memory intensive task was interrupted&#34;</span>);  
</span></span><span style="display:flex;"><span>        }  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Finished generating random numbers&#34;</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>After the intensive task thread finishes we can see that the logging thread still running which makes no sense.</p>
<pre tabindex="0"><code>Memory Usage: 2978040 bytes
Memory Usage: 4384032 bytes
Memory Usage: 5255840 bytes
Memory Usage: 6269928 bytes
Finished generating random numbers
Memory Usage: 6269928 bytes
</code></pre><p><strong>Lifecycle</strong>: Daemon threads are typically <strong>short-lived</strong>. Since the JVM doesn&rsquo;t wait for daemon threads to finish, they may be abruptly terminated when the program exits, even if they haven&rsquo;t completed their work.</p>
<p>How we can solve this is by setting the logging thread as daemon thread</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>memoryMonitorThread.<span style="color:#a6e22e">setDaemon</span>(<span style="color:#66d9ef">true</span>);
</span></span></code></pre></div><pre tabindex="0"><code>Memory Usage: 3271760 bytes
Memory Usage: 4194304 bytes
Memory Usage: 5255840 bytes
Memory Usage: 6269928 bytes
Finished generating random numbers

Process finished with exit code 0
</code></pre><h1 id="reducing-latency">Reducing Latency
</h1><h3 id="1-latency-in-threading">1. <strong>Latency in Threading</strong>:
</h3><p>In threading, <strong>latency</strong> refers to the <strong>delay</strong> or <strong>waiting time</strong> between when a thread is scheduled to run and when it actually starts executing, or the time taken to complete a task. This is typically seen as the amount of time it takes for a thread to begin processing or the delay involved in switching between threads.</p>
<h4 id="examples-in-threading">Examples in Threading:
</h4><ul>
<li><strong>Thread Start Latency</strong>: The delay between when you create and start a thread and when it actually begins running on a processor. This includes the time to schedule the thread, the overhead of context switching, and any delays introduced by operating system thread management.</li>
<li><strong>Context Switch Latency</strong>: When the operating system switches the CPU from one thread to another, there is a time delay involved, often known as a &ldquo;context switch&rdquo;. This can impact the overall response time, especially in real-time systems.</li>
<li><strong>Task Completion Latency</strong>: The time it takes for a thread to complete its work. For example, if a thread performs a computation, latency could refer to how long it takes to finish that task from the time it started.</li>
</ul>
<h3 id="2-throughput-in-threading">2. <strong>Throughput in Threading</strong>:
</h3><p>In threading, <strong>throughput</strong> refers to the <strong>amount of work</strong> or <strong>number of tasks</strong> that are completed in a given period of time. It‚Äôs a measure of how many operations a set of threads can execute per unit of time. Essentially, it refers to how efficiently multiple threads can process tasks concurrently.</p>
<h4 id="examples-in-threading-1">Examples in Threading:
</h4><ul>
<li><strong>Task Throughput</strong>: If you have a thread pool, the throughput could refer to how many tasks are processed by the threads in the pool per second.</li>
<li><strong>Parallel Throughput</strong>: In parallel computing, throughput can be seen as the number of tasks or operations performed by all threads in a multithreaded application in a given period of time.</li>
</ul>
<h1 id="data-race">Data Race
</h1><p>A <strong>data race</strong> occurs in concurrent programming when two or more threads access the same memory location at the same time, and at least one of the threads modifies the value. The issue arises because the threads are not properly synchronized, leading to unpredictable results or bugs in the program.</p>
<pre tabindex="0"><code class="language-javac" data-lang="javac">// Thread 1
x++;

// Thread 2
x++;
</code></pre><p>If both threads read the value of <code>x</code> at the same time before either writes back their incremented value, the final value of <code>x</code> might not be what is expected. Both threads may read the same value of <code>x</code> (let&rsquo;s say 5), increment it, and write back 6, even though it should have been 7.</p>
<h2 id="how-to-solve-it">How to solve it
</h2><p>In some cases, you may want to ensure that a variable‚Äôs value is always read from the main memory, and not cached locally in a thread‚Äôs cache. This can be useful when dealing with <strong>visibility issues</strong> (not necessarily data races, but it can still be related).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">volatile</span> <span style="color:#66d9ef">int</span> count;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        count<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Or using Synchronization and locks, but this comes later</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Counter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Object lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">increment</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span>(lock) {
</span></span><span style="display:flex;"><span>            count<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span>(lock) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now we will talk about more topics in multithreading using this youtube video <a class="link" href="https://www.youtube.com/watch?v=ddUSe3A9MMg"  target="_blank" rel="noopener"
    >https://www.youtube.com/watch?v=ddUSe3A9MMg</a>.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/notes/">Notes</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <div class="disqus-container">
    
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 Yousef Albael
    </section>
    
    <section class="powerby">
        
            ¬© 2024 Albasel Blog. All rights reserved. <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.509fbaad34e839450506abc56cd9e9acf53da456d3988b7cd276fbfb96fe6f6e.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
