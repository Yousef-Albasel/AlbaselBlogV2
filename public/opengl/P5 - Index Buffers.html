<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5 Index Buffers - Albasel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="topnav">
    <div class="topnav-inner">
        <a href="/" class="topnav-logo">Albasel</a>
        
        <button class="nav-hamburger" id="nav-hamburger" aria-label="Toggle menu">
            <i class="fas fa-bars"></i>
        </button>

        <ul class="topnav-links" id="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/posts.html">Posts</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/aboutme.html">About</a></li>
        </ul>

        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
            <i class="fa-solid fa-moon" id="theme-icon"></i>
        </button>
    </div>
</nav>


    <div class="main-content">
        <article class="article">
            <header class="article-header">
                <h1>P5 Index Buffers</h1>
                <div class="article-meta">
                    
                    <span class="article-category">OpenGL</span>
                    
                    <time>2024-01-01</time>
                </div>
                
                <img src="/images/opengl.jpg" alt="P5 Index Buffers" class="article-image">
                
            </header>

            <div class="post-content">
                <h4>Index Buffers</h4>
<hr>
<p>When we draw shapes like triangles, using the same vertex positions repeatedly can lead to unnecessary memory duplication. Imagine drawing a triangle; you would have three vertices at the corners, and each vertex has its position information. If you want to draw another triangle to form a square, you’d end up storing the same vertex positions again, leading to redundancy in memory usage.</p>
<pre class="hljs"><code><span class="hljs-type">float</span> positions[] = {
                            <span class="hljs-number">-0.5f</span>, <span class="hljs-number">-0.5f</span>,
                             <span class="hljs-number">0.5f</span>,<span class="hljs-number">-0.5f</span>, 
                             <span class="hljs-number">0.5f</span>, <span class="hljs-number">0.5f</span>,

                              <span class="hljs-number">0.5f</span>,<span class="hljs-number">0.5f</span>, <span class="hljs-comment">// redundunt</span>
                             <span class="hljs-number">-0.5f</span>, <span class="hljs-number">0.5f</span>,
                             <span class="hljs-number">-0.5f</span>, <span class="hljs-number">-0.5f</span>, <span class="hljs-comment">//redundunt</span>
        };
</code></pre>
<p>Index Buffers it’s like having a shared list of vertices, and the index buffer tells the graphics system which vertices to use for each triangle. This approach not only reduces memory consumption but also improves rendering efficiency, especially when dealing with complex 3D models composed of numerous triangles.</p>
<p>so what we gonna do is to get rid of the two redundant vertices and create an array for indices</p>
<pre class="hljs"><code><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> indices[] = {
                      <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>,
                      <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>
        };

</code></pre>
<p>next we create an index buffer of type <code>GL_ELEMENT_ARRAY_BUFFER</code> and bind it so we can use this index buffer to draw whatever shapes we want</p>
<pre class="hljs"><code>
        <span class="hljs-comment">// Index Buffer creating</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> ibo;
        glGenBuffers(<span class="hljs-number">1</span>, &amp;ibo); <span class="hljs-comment">// Generates a buffer and gives back ID</span>
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo); <span class="hljs-comment">// binding to the buffer we created.</span>
        glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="hljs-number">6</span>  * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>), indices, GL_STATIC_DRAW);
</code></pre>
<p>last thing we want to do is to modify the draw method we used, this time we will use a <code>glDrawElement()</code> method to draw our shape.</p>
<pre class="hljs"><code>glDrawElements(GL_TRIANGLES,<span class="hljs-number">6</span>,GL_UNSIGNED_INT,<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// use if you don&#x27;t have a index buffer</span>
</code></pre>
<p><img src="https://i.postimg.cc/j5Yg9VfM/image.png" alt=""></p>

            </div>

            <footer class="article-footer">
                <a href="/posts.html"><i class="fas fa-arrow-left"></i> All Posts</a>
                <a href="/">Home</a>
            </footer>
        </article>
    </div>

    <script>
    // Theme
    const toggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    function setTheme(m) {
        document.body.classList.toggle('dark-mode', m === 'dark');
        themeIcon.className = m === 'dark' ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
        localStorage.setItem('theme', m);
    }
    toggleBtn.addEventListener('click', () => setTheme(document.body.classList.contains('dark-mode') ? 'light' : 'dark'));
    if (localStorage.getItem('theme') === 'dark') setTheme('dark');

    document.getElementById('nav-hamburger').addEventListener('click', () => {
        document.getElementById('nav-links').classList.toggle('open');
    });

    // Copy buttons for code blocks
    document.querySelectorAll('pre.hljs').forEach(pre => {
        const wrapper = document.createElement('div');
        wrapper.className = 'code-wrapper';
        pre.parentNode.insertBefore(wrapper, pre);
        wrapper.appendChild(pre);

        const btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.textContent = 'Copy';
        wrapper.appendChild(btn);

        btn.addEventListener('click', () => {
            const code = pre.querySelector('code');
            navigator.clipboard.writeText(code ? code.textContent : pre.textContent);
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 1500);
        });
    });
    </script>
</body>
</html>
